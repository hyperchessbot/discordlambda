discordlambda

<form target="_blank" method="POST" action="/.netlify/functions/index">
  <label for="fname">First name:</label><br>
  <input type="text" id="fname" name="fname" value="John"><br>
  <label for="lname">Last name:</label><br>
  <input type="text" id="lname" name="lname" value="Doe"><br><br>  
  <div id="dropimg" style="width:200px;height:200px;background-color: #ffa;"></div>
  <textarea id="filebase64" name="filebase64" rows="10" cols="80"></textarea>
  <input type="submit" value="Submit">
</form>
<script>
	const dropimge = document.getElementById("dropimg")
	dropimge.addEventListener('dragover', e => {
		e.stopPropagation()
		e.preventDefault()
	})
	dropimge.addEventListener('drop', e => {
    	e.stopPropagation()
    	e.preventDefault()
    	const files = e.dataTransfer.files
    	if(files.length > 0){
    		const file = files[0]
    		const reader = new FileReader()
    		reader.onload = e => {
    			let result = e.target.result
    			let b64 = btoa(result)
    			console.log("dropped file", b64)
    			document.getElementById("filebase64").value = b64
    		}
    		reader.readAsBinaryString(file)
    	}
    })
</script>
